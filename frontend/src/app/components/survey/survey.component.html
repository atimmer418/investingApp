<ion-header>
  <ion-toolbar color="primary">
    <ion-title>Survey (Question {{ surveyQuestionIndex + 1 }} of {{ surveyQuestions.length }})</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding" *ngIf="currentQuestion"> <!-- Show content only if currentQuestion is defined -->
  <ion-text color="dark" class="ion-margin-bottom">
    <h3>{{ currentQuestion.questionText }}</h3>
  </ion-text>

  <ion-list lines="inset" inset="false" mode="ios">
    <ion-item
      *ngFor="let option of currentQuestion.responseChoices; let i = index"
      button
      (click)="selectAnswerAndProceed(option.id)"
      detail="false"
      class="ion-margin-bottom survey-option-item"
      [class.selected-option]="currentQuestion.answer === option.id"
    >
      <ion-label class="ion-text-wrap">{{ option.text }}</ion-label>
      <ion-icon *ngIf="currentQuestion.answer === option.id" name="checkmark-circle" slot="end" color="primary"></ion-icon>
    </ion-item>
  </ion-list>
</ion-content>

<ion-footer class="ion-padding-horizontal ion-padding-bottom" *ngIf="currentQuestion && surveyQuestions.length > 1">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="previousQuestion()" [disabled]="surveyQuestionIndex === 0">
        <ion-icon slot="start" name="chevron-back-outline"></ion-icon>
        Previous
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-footer>