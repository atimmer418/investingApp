<ion-header class="ion-no-border">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-back-button defaultHref="/"></ion-back-button>
    </ion-buttons>
    <ion-title>Chart Your Path</ion-title>
    <ion-progress-bar [value]="0.5"></ion-progress-bar>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true" class="ion-padding">
  <div class="survey-form-container">

    <!-- Question 1: Monthly Investment -->
    <div class="question-wrapper">
      <h2>First, let's power up your portfolio.</h2>
      <p class="helper-text">This is the amount from each paycheck that will build your financial freedom.</p>
      
      <div class="input-display-wrapper">
        <span class="currency-symbol">$</span>
        <ion-input
          type="text"
          inputmode="numeric"
          [(ngModel)]="formattedMonthlyInvestment"
          (ionBlur)="formatAndSetMonthlyInvestment()"
          (ionFocus)="unformatMonthlyInvestment()"
        ></ion-input>
        <span class="per-month-label">/ month</span>
      </div>

      <ion-range
        aria-label="Monthly Investment"
        [min]="100"
        [max]="10000"
        [step]="100"
        [(ngModel)]="monthlyInvestment"
        (ionChange)="onMonthlySliderChange()"
      ></ion-range>
    </div>

    <!-- Divider -->
    <hr class="section-divider" />

    <!-- Question 2: Retirement Income -->
    <div class="question-wrapper">
      <h2>Everyone has a 'walk away' number.</h2>
      <p class="helper-text">What's the annual income that would allow you to confidently leave work behind?</p>
      
      <div class="input-display-wrapper">
        <span class="currency-symbol">$</span>
        <ion-input
          type="text"
          inputmode="numeric"
          [(ngModel)]="formattedRetirementIncome"
          (ionBlur)="formatAndSetRetirementIncome()"
          (ionFocus)="unformatRetirementIncome()"
        ></ion-input>
        <span class="per-month-label">/ year</span>
      </div>

      <ion-range
        aria-label="Retirement Income"
        [min]="40000"
        [max]="250000"
        [step]="5000"
        [(ngModel)]="retirementIncome"
        (ionChange)="onIncomeSliderChange()"
      ></ion-range>
    </div>

  </div>
</ion-content>

<ion-footer class="ion-no-border">
  <div class="footer-container">
    <p class="dynamic-result-text">
      With your plan, you can start living on <strong>${{ formattedRetirementIncome }}/yr</strong> in just <strong>{{ timeToIndependence }} years</strong>.
      Monte Carlo simulations show a <strong>{{ successProbability }}%</strong> chance of success.
    </p>
    <ion-button expand="block" (click)="continueToLinking()" class="cta-main">
      Start Investing
    </ion-button>
  </div>
</ion-footer>